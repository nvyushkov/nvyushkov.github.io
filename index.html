<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0, maximum-scale=2.0 user-scalable=yes" name="viewport">
    <meta content="telephone=yes" name="format-detection">
    <title>Главная страница</title>
    <link rel="stylesheet" href="styles/app.css">
    <link rel="stylesheet" href="styles/pages/index.css">
  </head>
  <body>
    <header class="header">
      <button class="header_btn button_bordered" id="navOpen" type="button" data-role="menu" data-state="default" title="Меню сайта"><span class="button_bordered__border bottom hor"></span><span class="button_bordered__border top hor"></span><span class="button_bordered__border left vert"></span><span class="button_bordered__border right vert"></span></button><a class="logo" href="index.html" target="_self" title="Главная страница"><img src="icons/logo.svg" alt="Логотип"></a>
    </header>
    <div id="content">
      <div class="nav" id="nav">
        <button class="nav_close" id="navClose" type="button"><img alt="Закрыть меню" src="./icons/cross.svg"><span class="border bottom"></span><span class="border right"></span></button>
        <nav>
          <li><a class="active" href="index.html">Главная</a></li>
          <li><a href="cards.html">Карточки</a></li>
        </nav>
      </div>
      <script>
        (function(){
          const openBtn = document.querySelector("#navOpen") || null,
            closeBtn = document.querySelector("#navClose") || null,
            nav = document.querySelector("#nav") || null;
        
          if (!openBtn || !closeBtn || !nav) { return false }
        
          const tgMenuState = status => nav.classList[status ? "add" : "remove"]("active")
        
          openBtn.addEventListener("click", ()=>tgMenuState(true))
          closeBtn.addEventListener("click", ()=>tgMenuState(false))
        })()
      </script>
      <main class="page main">
        <div class="page_btn">
          <button class="page_btn___add button_bordered">Добавить карточку<span class="button_bordered__border bottom hor"></span><span class="button_bordered__border top hor"></span><span class="button_bordered__border left vert"></span><span class="button_bordered__border right vert"></span></button>
        </div>
        <div class="wf">
          <div class="wf_mask">
            <div class="wf_wrapper">
              <div class="wf_window">
                <div id="window_form">
                  <p>Создать новую карточку</p>
                  <form class="window_form">
                    <label for="input_name">
                      <input id="input_name" type="text" name="name" required="true"><span>Название:</span>
                    </label>
                    <label class="file" for="input_file">
                      <button class="button_bordered" id="input_file_btn" type="button"><span class="title">Выбрать фото</span><span class="button_bordered__border bottom hor"></span><span class="button_bordered__border top hor"></span><span class="button_bordered__border left vert"></span><span class="button_bordered__border right vert"></span></button>
                      <input id="input_file" type="file" name="file" required="true"><span>Фото:</span>
                    </label>
                    <label for="input_desc">
                      <textarea id="input_desc" type="text" name="description" required="true" rows="3"></textarea><span>Описание:</span>
                    </label>
                    <label class="checkbox" for="input_check">
                      <input id="input_check" type="checkbox" name="description" required="true"><img id="input_check_img" data-active="icons/checkbox-active.svg" data-default="icons/checkbox-default.svg" src="icons/checkbox-default.svg"><span>Показать</span>
                    </label>
                    <div class="buttons">
                      <button class="disabled" disabled="disabled">ОК</button>
                      <button class="window_form__cancel button_bordered" type="button">Отмена<span class="button_bordered__border bottom hor"></span><span class="button_bordered__border top hor"></span><span class="button_bordered__border left vert"></span><span class="button_bordered__border right vert"></span></button>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
        <script>
          (function () {
          
            function checkbox () {
              const checkbox = document.querySelector("#input_check") || null,
                img = document.querySelector("#input_check_img") || null;
              if (!checkbox || !img) { return false;}
          
              const toggle = status => img.src = img.getAttribute(status ? 'data-active' : 'data-default')
          
              checkbox.addEventListener("change", function () {toggle(this.checked)})
              toggle(false)
            }
          
            function file () {
              const button = document.querySelector("#input_file_btn") || null,
                input = document.querySelector("#input_file") || null;
              if (!button || !input) { return false;}
          
              const paste = title => button.querySelector(".title").innerHTML = title
          
              button.addEventListener("click", () => input.click())
              input.addEventListener("change", function () { paste(this.value)})
            }
          
            function winBox () {
              const opener = document.querySelector(".wf") || null,
                cancel = document.querySelector(".window_form__cancel") || null,
                win = document.querySelector(".wf_window") || null,
                openButton = document.querySelector(".page_btn___add") || null;
          
              if (!opener || !cancel || !win || !openButton) { return false;}
          
              const toggle = status => opener.classList[status ? "add" : "remove"]("active")
          
              win.addEventListener("click", function (ev) {
                ev.stopPropagation();
                return false;
              })
              opener.addEventListener("click", () => toggle(false))
              cancel.addEventListener("click", () => toggle(false))
              openButton.addEventListener("click", () => toggle(true))
            }
          
            checkbox()
            file()
            winBox()
          })()
        </script>
      </main>
    </div>
    <footer><a href="mailto:wimanen@ya.ru">wimanen@ya.ru</a></footer>
  </body>
</html>